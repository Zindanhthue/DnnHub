
-- Good
local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local CoreGui = game:GetService("CoreGui")
local Camera = workspace.CurrentCamera
local LocalPlayer = Players.LocalPlayer
local Character = LocalPlayer.Character or LocalPlayer.CharacterAdded:Wait()
local Humanoid = Character:WaitForChild("Humanoid")

-- GUI Setup
local gui = Instance.new("ScreenGui", CoreGui)
gui.Name = "DnnHub"

-- Toggle Button
local toggle = Instance.new("ImageButton", gui)
toggle.Size = UDim2.new(0, 50, 0, 50)
toggle.Position = UDim2.new(0, 30, 0, 100)
toggle.BackgroundTransparency = 1
toggle.Image = "rbxassetid://13226300735"
toggle.Draggable = true
toggle.Active = true
Instance.new("UICorner", toggle)

-- Main Frame
local main = Instance.new("Frame", gui)
main.Size = UDim2.new(0, 280, 0, 220)
main.Position = UDim2.new(0, 260, 0, 70)
main.BackgroundColor3 = Color3.fromRGB(30,30,30)
main.BackgroundTransparency = 0.3
main.Visible = false
main.Active = true
main.Draggable = true
Instance.new("UICorner", main)
-- Toggle m·ªü menu
toggle.MouseButton1Click:Connect(function()
	main.Visible = not main.Visible
end)

-- Title
-- Title (Logo + Text DnnHub) - CƒÉn gi·ªØa ƒë·∫πp
local titleFrame = Instance.new("Frame", main)
titleFrame.Size = UDim2.new(1, 0, 0, 60)
titleFrame.Position = UDim2.new(0, 0, 0, 0)
titleFrame.BackgroundTransparency = 1

-- Logo to r√µ
local logoIcon = Instance.new("ImageLabel", titleFrame)
logoIcon.Size = UDim2.new(0, 40, 0, 40)
logoIcon.Position = UDim2.new(0.5, -50, 0, 14)
logoIcon.BackgroundTransparency = 1
logoIcon.Image = "rbxassetid://13226300735"

-- Ch·ªØ DnnHub - cƒÉn gi·ªØa
local title = Instance.new("TextLabel", titleFrame)
title.Text = "DnnHub"
title.Size = UDim2.new(0, 120, 0, 32)
title.Position = UDim2.new(0.5, -30, 0, 14)
title.BackgroundTransparency = 1
title.TextColor3 = Color3.fromRGB(255, 105, 180) -- h·ªìng neon
title.TextSize = 22
title.Font = Enum.Font.GothamBlack
title.TextXAlignment = Enum.TextXAlignment.Center

-- Tabs (d·ªãch xu·ªëng sau ti√™u ƒë·ªÅ, nh·ªè g·ªçn l·∫°i)
local tabs = Instance.new("Frame", main)
tabs.Size = UDim2.new(1, 0, 0, 26)
tabs.Position = UDim2.new(0, 0, 0, 65)
tabs.BackgroundTransparency = 1

-- Tabs list
local tabList = {}
local tabButtons = {}
local tabNames = {"Miss", "ESP", "Thang", "Aimbot"}
local tabColors = {
	Miss = Color3.fromRGB(0, 170, 255),   -- xanh d∆∞∆°ng
	ESP = Color3.fromRGB(255, 170, 0),     -- cam
	Thang = Color3.fromRGB(100, 255, 100), -- xanh l√°
	Aimbot = Color3.fromRGB(255, 85, 85),  -- ƒë·ªè
}

local selectedTab = nil

for i, name in ipairs(tabNames) do
	local btn = Instance.new("TextButton", tabs)
	btn.Size = UDim2.new(0, 65, 0, 26)
	btn.Position = UDim2.new(0, (i - 1) * 68 + 8, 0, 0)
	btn.Text = name
	btn.BackgroundColor3 = tabColors[name]
	btn.TextColor3 = Color3.new(1,1,1)
	btn.Font = Enum.Font.GothamBold
	btn.TextSize = 13
	tabButtons[name] = btn

	-- Hover effect
	btn.MouseEnter:Connect(function()
		if selectedTab ~= name then
			btn.BackgroundColor3 = tabColors[name]:Lerp(Color3.new(1,1,1), 0.2)
		end
	end)
	btn.MouseLeave:Connect(function()
		if selectedTab ~= name then
			btn.BackgroundColor3 = tabColors[name]
		end
	end)

	btn.MouseButton1Click:Connect(function()
		-- ·∫®n t·∫•t c·∫£ tab content
		for _, tab in pairs(tabList) do tab.Visible = false end
		-- Reset m√†u t·∫•t c·∫£ button
		for tabName, button in pairs(tabButtons) do
			if tabName == name then
				button.BackgroundColor3 = tabColors[name]:Lerp(Color3.new(1,1,1), 0.3) -- ch·ªçn = s√°ng h∆°n
			else
				button.BackgroundColor3 = tabColors[tabName]
			end
		end
		-- Hi·ªán tab ƒë∆∞·ª£c ch·ªçn
		tabList[name].Visible = true
		selectedTab = name
	end)
end

-- Tabs content holder (gi·ªØ nguy√™n chi·ªÅu cao t√≠nh t·ª´ d∆∞·ªõi tabs)
local function createTab(name)
	local frame = Instance.new("Frame", main)
	frame.Size = UDim2.new(1, 0, 1, -95)
	frame.Position = UDim2.new(0, 0, 0, 95)
	frame.BackgroundTransparency = 1
	frame.Visible = false
	tabList[name] = frame
	return frame
end

-- MISS TAB 
local Players = game:GetService("Players")
local LocalPlayer = Players.LocalPlayer
local UserInputService = game:GetService("UserInputService")
local Humanoid = LocalPlayer.Character:WaitForChild("Humanoid")

local missTab = createTab("Miss")

-- Speed
local speedBox = Instance.new("TextBox", missTab)
speedBox.PlaceholderText = "Speed"
speedBox.Size = UDim2.new(0, 60, 0, 22)
speedBox.Position = UDim2.new(0, 5, 0, 5)
speedBox.Font = Enum.Font.Gotham
speedBox.TextSize = 12
speedBox.BackgroundColor3 = Color3.fromRGB(60, 60, 60)
speedBox.TextColor3 = Color3.new(1,1,1)

local speedBtn = Instance.new("TextButton", missTab)
speedBtn.Size = UDim2.new(0, 60, 0, 22)
speedBtn.Position = UDim2.new(0, 70, 0, 5)
speedBtn.Text = "Speed"
speedBtn.Font = Enum.Font.GothamBold
speedBtn.TextSize = 12
speedBtn.BackgroundColor3 = Color3.fromRGB(150, 0, 0)
speedBtn.TextColor3 = Color3.new(1,1,1)

local speedEnabled = false
speedBtn.MouseButton1Click:Connect(function()
	speedEnabled = not speedEnabled
	speedBtn.BackgroundColor3 = speedEnabled and Color3.fromRGB(0, 170, 0) or Color3.fromRGB(150, 0, 0)
	local val = tonumber(speedBox.Text)
	Humanoid.WalkSpeed = (speedEnabled and val and val > 0) and val or 16
end)

speedBox.FocusLost:Connect(function()
	if speedEnabled then
		local val = tonumber(speedBox.Text)
		if val then Humanoid.WalkSpeed = val end
	end
end)

-- Infinite Jump
local infJump = false
local jumpBtn = Instance.new("TextButton", missTab)
jumpBtn.Size = UDim2.new(0, 60, 0, 22)
jumpBtn.Position = UDim2.new(0, 135, 0, 5)
jumpBtn.Text = "Jump"
jumpBtn.Font = Enum.Font.GothamBold
jumpBtn.TextSize = 12
jumpBtn.BackgroundColor3 = Color3.fromRGB(150, 0, 0)
jumpBtn.TextColor3 = Color3.new(1,1,1)

jumpBtn.MouseButton1Click:Connect(function()
	infJump = not infJump
	jumpBtn.BackgroundColor3 = infJump and Color3.fromRGB(0, 170, 0) or Color3.fromRGB(150, 0, 0)
end)

UserInputService.JumpRequest:Connect(function()
	if infJump then
		Humanoid:ChangeState(Enum.HumanoidStateType.Jumping)
	end
end)

-- Fix Lag
local fixBtn = Instance.new("TextButton", missTab)
fixBtn.Size = UDim2.new(0, 60, 0, 22)
fixBtn.Position = UDim2.new(0, 5, 0, 33)
fixBtn.Text = "Fix Lag"
fixBtn.Font = Enum.Font.GothamBold
fixBtn.TextSize = 12
fixBtn.BackgroundColor3 = Color3.fromRGB(150, 0, 0)
fixBtn.TextColor3 = Color3.new(1, 1, 1)

fixBtn.MouseButton1Click:Connect(function()
	fixBtn.BackgroundColor3 = Color3.fromRGB(0, 170, 0)

	local Lighting = game:GetService("Lighting")
	local Workspace = game:GetService("Workspace")
	local Terrain = Workspace:FindFirstChildOfClass("Terrain")
	local Players = game:GetService("Players")

	-- T·∫Øt hi·ªáu ·ª©ng + gi·∫£m chi ti·∫øt
	for _, obj in ipairs(Workspace:GetDescendants()) do
		if obj:IsA("ParticleEmitter") or obj:IsA("Trail") or obj:IsA("Smoke") or obj:IsA("Fire") then
			obj.Enabled = false
		elseif obj:IsA("Decal") or obj:IsA("Texture") then
			obj.Transparency = 1
		elseif obj:IsA("PointLight") or obj:IsA("SpotLight") or obj:IsA("SurfaceLight") then
			obj.Enabled = false
		elseif obj:IsA("Sound") then
			obj.Volume = 0
		elseif obj:IsA("MeshPart") then
			obj.Material = Enum.Material.Plastic
			obj.Reflectance = 0
		elseif obj:IsA("UnionOperation") or obj:IsA("Part") or obj:IsA("WedgePart") then
			obj.Material = Enum.Material.SmoothPlastic
			obj.Reflectance = 0
		end
	end

	-- T·∫Øt shadow, ch·ªânh √°nh s√°ng
	Lighting.GlobalShadows = false
	Lighting.FogEnd = 1e10
	Lighting.Brightness = 0
	Lighting.OutdoorAmbient = Color3.fromRGB(0, 0, 0)
	Lighting.EnvironmentDiffuseScale = 0
	Lighting.EnvironmentSpecularScale = 0

	-- Terrain
	if Terrain then
		Terrain.WaterWaveSize = 0
		Terrain.WaterWaveSpeed = 0
		Terrain.WaterReflectance = 0
		Terrain.WaterTransparency = 1
	end

	-- T·∫Øt clothing & accessories
	for _, plr in ipairs(Players:GetPlayers()) do
		if plr ~= Players.LocalPlayer and plr.Character then
			for _, item in ipairs(plr.Character:GetDescendants()) do
				if item:IsA("Accessory") or item:IsA("Clothing") then
					item:Destroy()
				end
			end
		end
	end

	-- T·∫Øt camera effects
	local camera = Workspace.CurrentCamera
	if camera:FindFirstChildOfClass("BlurEffect") then
		camera:FindFirstChildOfClass("BlurEffect"):Destroy()
	end
end)

-- N√∫t trong Tab Miss ƒë·ªÉ t·∫°o ho·∫∑c x√≥a Tool

local tpBtn = Instance.new("TextButton", missTab)

tpBtn.Size = UDim2.new(0, 60, 0, 22)
tpBtn.Position = UDim2.new(0, 200, 0, 5)
tpBtn.Text = "TPTool:OFF"
tpBtn.Font = Enum.Font.GothamBold
tpBtn.TextSize = 12
tpBtn.BackgroundColor3 = Color3.fromRGB(150, 0, 0)
tpBtn.TextColor3 = Color3.new(1,1,1)

local toolExists = false

tpBtn.MouseButton1Click:Connect(function()
	local backpack = Players.LocalPlayer:FindFirstChild("Backpack")
	local playerGui = Players.LocalPlayer:FindFirstChild("PlayerGui")

	if not toolExists and not backpack:FindFirstChild("Teleport Tool") then
		toolExists = true
		tpBtn.Text = "TPTool:ON"
		tpBtn.BackgroundColor3 = Color3.fromRGB(0, 170, 0)

		-- T·∫°o tool
		local tool = Instance.new("Tool")
		tool.Name = "Teleport Tool"
		tool.RequiresHandle = false
		tool.CanBeDropped = false
		tool.Parent = backpack

		-- GUI
		local gui = Instance.new("ScreenGui", playerGui)
		gui.Name = "TeleportMenu"
		gui.ResetOnSpawn = false
		gui.Enabled = false

		-- Menu ch√≠nh
local frame = Instance.new("Frame", gui)
frame.Size = UDim2.new(0, 260, 0, 230)
frame.Position = UDim2.new(0.5, -130, 0.5, -115)
frame.BackgroundColor3 = Color3.fromRGB(10, 10, 10)
frame.BackgroundTransparency = 0.25
frame.BorderSizePixel = 0
frame.Active = true
frame.Draggable = true
Instance.new("UICorner", frame).CornerRadius = UDim.new(0, 8)

-- Vi·ªÅn trong
local innerBorder = Instance.new("Frame", frame)
innerBorder.Size = UDim2.new(1, -4, 1, -4)
innerBorder.Position = UDim2.new(0, 2, 0, 2)
innerBorder.BackgroundTransparency = 1
Instance.new("UICorner", innerBorder).CornerRadius = UDim.new(0, 8)

-- Ti√™u ƒë·ªÅ
local title = Instance.new("TextLabel", frame)
title.Size = UDim2.new(1, 0, 0, 26)
title.Text = " T√¨m ng∆∞·ªùi ƒë·ªÉ d·ªãch chuy·ªÉn"
title.Font = Enum.Font.GothamBold
title.TextSize = 13
title.TextColor3 = Color3.fromRGB(255, 255, 255)
title.BackgroundTransparency = 1
title.TextXAlignment = Enum.TextXAlignment.Center

-- √î nh·∫≠p t√¨m ki·∫øm
local searchBox = Instance.new("TextBox", frame)
searchBox.PlaceholderText = "Nh·∫≠p t√™n ho·∫∑c @username..."
searchBox.Size = UDim2.new(1, -20, 0, 22)
searchBox.Position = UDim2.new(0, 10, 0, 30)
searchBox.Font = Enum.Font.Gotham
searchBox.TextSize = 12
searchBox.Text = ""
searchBox.BackgroundColor3 = Color3.fromRGB(35, 35, 35)
searchBox.TextColor3 = Color3.new(1,1,1)
Instance.new("UICorner", searchBox).CornerRadius = UDim.new(0, 6)

-- Danh s√°ch cu·ªôn
local scroll = Instance.new("ScrollingFrame", frame)
scroll.Size = UDim2.new(1, -20, 1, -64)
scroll.Position = UDim2.new(0, 10, 0, 58)
scroll.CanvasSize = UDim2.new(0, 0, 0, 0)
scroll.AutomaticCanvasSize = Enum.AutomaticSize.Y
scroll.ScrollBarThickness = 4
scroll.BackgroundColor3 = Color3.fromRGB(20, 20, 20)
scroll.BackgroundTransparency = 0.2
Instance.new("UICorner", scroll).CornerRadius = UDim.new(0, 6)

local layout = Instance.new("UIListLayout", scroll)
layout.SortOrder = Enum.SortOrder.LayoutOrder
layout.Padding = UDim.new(0, 6)

-- Giao di·ªán ng∆∞·ªùi ch∆°i
local function createPlayerEntry(p)
	local btn = Instance.new("Frame", scroll)
	btn.Size = UDim2.new(1, 0, 0, 48)
	btn.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
	btn.BackgroundTransparency = 0.1
	Instance.new("UICorner", btn).CornerRadius = UDim.new(0, 6)

	local thumb = Players:GetUserThumbnailAsync(p.UserId, Enum.ThumbnailType.HeadShot, Enum.ThumbnailSize.Size48x48)
	local img = Instance.new("ImageLabel", btn)
	img.Size = UDim2.new(0, 36, 0, 36)
	img.Position = UDim2.new(0, 6, 0, 6)
	img.Image = thumb
	img.BackgroundTransparency = 1

	local nameLbl = Instance.new("TextLabel", btn)
	nameLbl.Size = UDim2.new(1, -100, 0, 20)
	nameLbl.Position = UDim2.new(0, 48, 0, 4)
	nameLbl.Text = p.DisplayName
	nameLbl.Font = Enum.Font.GothamBold
	nameLbl.TextSize = 12
	nameLbl.TextColor3 = Color3.fromRGB(255, 255, 255)
	nameLbl.BackgroundTransparency = 1
	nameLbl.TextXAlignment = Enum.TextXAlignment.Left

	local userLbl = Instance.new("TextLabel", btn)
	userLbl.Size = UDim2.new(1, -100, 0, 16)
	userLbl.Position = UDim2.new(0, 48, 0, 24)
	userLbl.Text = "@" .. p.Name .. " | ID: " .. tostring(p.UserId)
	userLbl.Font = Enum.Font.Gotham
	userLbl.TextSize = 11
	userLbl.TextColor3 = Color3.fromRGB(160, 160, 160)
	userLbl.BackgroundTransparency = 1
	userLbl.TextXAlignment = Enum.TextXAlignment.Left

	local selectBtn = Instance.new("TextButton", btn)
	selectBtn.Size = UDim2.new(0, 44, 0, 24)
	selectBtn.Position = UDim2.new(1, -50, 0.5, -12)
	selectBtn.Text = "Ch·ªçn"
	selectBtn.Font = Enum.Font.GothamBold
	selectBtn.TextSize = 11
	selectBtn.TextColor3 = Color3.new(1, 1, 1)
	selectBtn.BackgroundColor3 = Color3.fromRGB(80, 80, 80)
	Instance.new("UICorner", selectBtn).CornerRadius = UDim.new(0, 5)

	selectBtn.MouseButton1Click:Connect(function()
	if selectedPlayer == p then
		-- N·∫øu ƒëang ch·ªçn ng∆∞·ªùi n√†y ‚Üí h·ªßy ch·ªçn
		selectedPlayer = nil
		selectBtn.BackgroundColor3 = Color3.fromRGB(80, 80, 80)
	else
		-- Ch·ªçn ng∆∞·ªùi m·ªõi
		selectedPlayer = p
		for _, child in ipairs(scroll:GetChildren()) do
			if child:IsA("Frame") then
				local btn = child:FindFirstChildWhichIsA("TextButton")
				if btn then
					btn.BackgroundColor3 = Color3.fromRGB(80, 80, 80)
				end
			end
		end
		selectBtn.BackgroundColor3 = Color3.fromRGB(0, 170, 0)
	end
end)
end
		local function refreshList(filter)
	-- Gi·ªØ l·∫°i layout, x√≥a c√°c player entry
	for _, v in ipairs(scroll:GetChildren()) do
		if not v:IsA("UIListLayout") then
			v:Destroy()
		end
	end

	layout.Parent = scroll
	filter = (filter or ""):lower()

	for _, p in ipairs(Players:GetPlayers()) do
		if p ~= LocalPlayer then
			local name = p.Name:lower()
			local display = p.DisplayName:lower()

			-- G·ª£i √Ω th√¥ng minh n·∫øu t√™n ch·ª©a ho·∫∑c b·∫Øt ƒë·∫ßu b·∫±ng k√Ω t·ª± nh·∫≠p
			if filter == "" or name:match(filter) or display:match(filter) then
				createPlayerEntry(p)
			end
		end
	end
end

		searchBox:GetPropertyChangedSignal("Text"):Connect(function()
			refreshList(searchBox.Text)
		end)
-- T·ª± ƒë·ªông c·∫≠p nh·∫≠t danh s√°ch khi c√≥ ng∆∞·ªùi m·ªõi v√†o
Players.PlayerAdded:Connect(function()
	if gui and gui.Enabled then
		refreshList(searchBox.Text)
	end
end)

-- T·ª± ƒë·ªông c·∫≠p nh·∫≠t danh s√°ch khi c√≥ ng∆∞·ªùi r·ªùi
Players.PlayerRemoving:Connect(function()
	if gui and gui.Enabled then
		refreshList(searchBox.Text)
	end
end)

		local lastEquipTime = 0
		tool.Equipped:Connect(function()
			local now = tick()
			if now - lastEquipTime < 0.5 then
				gui.Enabled = not gui.Enabled
			if gui.Enabled then
	                    searchBox.Text = "" -- reset √¥ t√¨m
	                    refreshList("")
                        end
			end
			lastEquipTime = now
		end)

		tool.Activated:Connect(function()
			if selectedPlayer and selectedPlayer.Character and selectedPlayer.Character:FindFirstChild("HumanoidRootPart") then
				LocalPlayer.Character:MoveTo(selectedPlayer.Character.HumanoidRootPart.Position + Vector3.new(3, 0, 0))
			end
		end)

	else
		toolExists = false
		tpBtn.Text = "TPTool:OFF"
		tpBtn.BackgroundColor3 = Color3.fromRGB(150, 0, 0)

		local backpack = Players.LocalPlayer:FindFirstChild("Backpack")
		local gui = Players.LocalPlayer:FindFirstChild("PlayerGui"):FindFirstChild("TeleportMenu")

		if backpack and backpack:FindFirstChild("Teleport Tool") then
			backpack:FindFirstChild("Teleport Tool"):Destroy()
		end
		if gui then
			gui:Destroy()
		end
	end
end)


-- ESP TAB
local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local LocalPlayer = Players.LocalPlayer
local Camera = workspace.CurrentCamera

local espTab = createTab("ESP")
local espSettings = {
    enemyESP = false,
    enemyName = false,
    enemyDistance = false,
    enemyHealth = false,
    teamESP = false,
    teamName = false,
    teamDistance = false,
    teamHealth = false
}

-- GUI Labels
local function createLabel(text, posY)
    local label = Instance.new("TextLabel", espTab)
    label.Size = UDim2.new(1, -10, 0, 15)
    label.Position = UDim2.new(0, 5, 0, posY)
    label.BackgroundTransparency = 1
    label.Text = text
    label.TextColor3 = Color3.new(1, 1, 1)
    label.Font = Enum.Font.GothamBold
    label.TextSize = 12
    label.TextXAlignment = Enum.TextXAlignment.Left
end

-- Toggle buttons
local function createSmallToggle(name, pos, label)
    local btn = Instance.new("TextButton", espTab)
    btn.Size = UDim2.new(0, 60, 0, 20)
    btn.Position = pos
    btn.Text = label
    btn.Font = Enum.Font.GothamBold
    btn.TextSize = 11
    btn.TextColor3 = Color3.new(1, 1, 1)
    btn.BackgroundColor3 = Color3.fromRGB(150, 0, 0)
    local state = false

    btn.MouseButton1Click:Connect(function()
        state = not state
        espSettings[name] = state
        btn.BackgroundColor3 = state and Color3.fromRGB(0, 170, 0) or Color3.fromRGB(150, 0, 0)
    end)
end

-- Labels + buttons layout
createLabel("ESP ƒê·ªãch", 5)
createSmallToggle("enemyESP", UDim2.new(0, 5, 0, 22), "Highlight")
createSmallToggle("enemyName", UDim2.new(0, 70, 0, 22), "T√™n")
createSmallToggle("enemyDistance", UDim2.new(0, 135, 0, 22), "Kho·∫£ng")
createSmallToggle("enemyHealth", UDim2.new(0, 200, 0, 22), "M√°u")

createLabel("ESP ƒê·ªìng ƒê·ªôi", 45)
createSmallToggle("teamESP", UDim2.new(0, 5, 0, 62), "Highlight")
createSmallToggle("teamName", UDim2.new(0, 70, 0, 62), "T√™n")
createSmallToggle("teamDistance", UDim2.new(0, 135, 0, 62), "Kho·∫£ng")
createSmallToggle("teamHealth", UDim2.new(0, 200, 0, 62), "M√°u")

-- Utility: Get or Create Billboard
local function getOrCreateGui(name, adornee, size, offset)
    local gui = adornee:FindFirstChild(name)
    if not gui then
        gui = Instance.new("BillboardGui")
        gui.Name = name
        gui.Adornee = adornee
        gui.Size = size
        gui.StudsOffset = offset
        gui.AlwaysOnTop = true
        gui.Parent = adornee

        local label = Instance.new("TextLabel", gui)
        label.Size = UDim2.new(1, 0, 1, 0)
        label.BackgroundTransparency = 1
        label.Font = Enum.Font.GothamBold
        label.TextSize = 11
        label.Name = "Text"
    end
    return gui
end

-- Utility: Get or Create Highlight
local function getOrCreateHighlight(char, name, color)
    local hl = char:FindFirstChild(name)
    if not hl then
        hl = Instance.new("Highlight", char)
        hl.Name = name
        hl.FillTransparency = 0.5
        hl.OutlineColor = Color3.new(1, 1, 1)
    end
    hl.FillColor = color
    return hl
end

-- Main render loop
RunService.RenderStepped:Connect(function()
    local charLocal = LocalPlayer.Character
    if not charLocal or not charLocal:FindFirstChild("HumanoidRootPart") then return end

    for _, plr in ipairs(Players:GetPlayers()) do
        if plr == LocalPlayer then continue end
        local char = plr.Character
        if not char then continue end

        local head = char:FindFirstChild("Head")
        local hrp = char:FindFirstChild("HumanoidRootPart")
        local hum = char:FindFirstChild("Humanoid")
        if not head or not hrp then continue end

        local isEnemy = plr.Team ~= LocalPlayer.Team
        local isTeammate = not isEnemy

        -- ESP ƒê·ªãch
        if isEnemy then
            if espSettings.enemyESP then
                getOrCreateHighlight(char, "ESPHighlight", Color3.new(1, 0, 0))
            else
                if char:FindFirstChild("ESPHighlight") then char.ESPHighlight:Destroy() end
            end

            if espSettings.enemyName then
                local gui = getOrCreateGui("ESPName", head, UDim2.new(0, 100, 0, 18), Vector3.new(0, 2.5, 0))
                gui.Text.Text = plr.Name
                gui.Text.TextColor3 = Color3.new(1, 0, 0)
            elseif head:FindFirstChild("ESPName") then head.ESPName:Destroy() end

            if espSettings.enemyHealth and hum then
                local gui = getOrCreateGui("ESPHealth", head, UDim2.new(0, 100, 0, 14), Vector3.new(0, 3.5, 0))
                gui.Text.Text = math.floor((hum.Health / hum.MaxHealth) * 100) .. "%"
                gui.Text.TextColor3 = Color3.fromRGB(0, 255, 0)
            elseif head:FindFirstChild("ESPHealth") then head.ESPHealth:Destroy() end

            if espSettings.enemyDistance then
                local gui = getOrCreateGui("ESPDist", hrp, UDim2.new(0, 100, 0, 14), Vector3.new(0, -2.5, 0))
                gui.Text.Text = string.format("%.0f m", (hrp.Position - charLocal.HumanoidRootPart.Position).Magnitude)
                gui.Text.TextColor3 = Color3.new(1, 0, 0)
            elseif hrp:FindFirstChild("ESPDist") then hrp.ESPDist:Destroy() end
        end

        -- ESP ƒê·ªìng ƒë·ªôi
        if isTeammate then
            if espSettings.teamESP then
                getOrCreateHighlight(char, "ESPHighlight", Color3.fromRGB(0, 170, 255))
            else
                if char:FindFirstChild("ESPHighlight") then char.ESPHighlight:Destroy() end
            end

            if espSettings.teamName then
                local gui = getOrCreateGui("ESPName", head, UDim2.new(0, 100, 0, 18), Vector3.new(0, 2.5, 0))
                gui.Text.Text = plr.Name
                gui.Text.TextColor3 = Color3.fromRGB(0, 170, 255)
            elseif head:FindFirstChild("ESPName") then head.ESPName:Destroy() end

            if espSettings.teamHealth and hum then
                local gui = getOrCreateGui("ESPHealth", head, UDim2.new(0, 100, 0, 14), Vector3.new(0, 3.5, 0))
                gui.Text.Text = math.floor((hum.Health / hum.MaxHealth) * 100) .. "%"
                gui.Text.TextColor3 = Color3.fromRGB(0, 255, 255)
            elseif head:FindFirstChild("ESPHealth") then head.ESPHealth:Destroy() end

            if espSettings.teamDistance then
                local gui = getOrCreateGui("ESPDist", hrp, UDim2.new(0, 100, 0, 14), Vector3.new(0, -2.5, 0))
                gui.Text.Text = string.format("%.0f m", (hrp.Position - charLocal.HumanoidRootPart.Position).Magnitude)
                gui.Text.TextColor3 = Color3.fromRGB(0, 170, 255)
            elseif hrp:FindFirstChild("ESPDist") then hrp.ESPDist:Destroy() end
        end
    end
end)

-- Tab Thang
local tabThang = createTab("Thang")

local Players = game:GetService("Players")
local LocalPlayer = Players.LocalPlayer

-- UI: Label + Input + Button
local label = Instance.new("TextLabel", tabThang)
label.Text = "Chi·ªÅu cao thang (m):"
label.Size = UDim2.new(0, 200, 0, 20)
label.Position = UDim2.new(0, 10, 0, 10)
label.BackgroundTransparency = 1
label.TextColor3 = Color3.new(1, 1, 1)
label.Font = Enum.Font.Gotham
label.TextSize = 14

local heightBox = Instance.new("TextBox", tabThang)
heightBox.Size = UDim2.new(0, 100, 0, 25)
heightBox.Position = UDim2.new(0, 10, 0, 35)
heightBox.Text = "10"
heightBox.TextColor3 = Color3.new(1, 1, 1)
heightBox.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
heightBox.Font = Enum.Font.Gotham
heightBox.TextSize = 14
heightBox.ClearTextOnFocus = false

local createBtn = Instance.new("TextButton", tabThang)
createBtn.Size = UDim2.new(0, 80, 0, 24)
createBtn.Position = UDim2.new(0, 120, 0, 35)
createBtn.Text = "T·∫°o Thang"
createBtn.Font = Enum.Font.GothamBold
createBtn.TextSize = 14
createBtn.TextColor3 = Color3.new(1, 1, 1)
createBtn.BackgroundColor3 = Color3.fromRGB(50, 50, 50)

-- Model l∆∞u thang
local ladderModel

-- H√†m t·∫°o thang
createBtn.MouseButton1Click:Connect(function()
	local height = tonumber(heightBox.Text)
	if not height or height <= 0 then return end

	-- ƒê·∫£m b·∫£o Character v√† HRP t·ªìn t·∫°i
	local character = LocalPlayer.Character or LocalPlayer.CharacterAdded:Wait()
	local hrp = character:FindFirstChild("HumanoidRootPart") or character:WaitForChild("HumanoidRootPart", 2)
	if not hrp then warn("Kh√¥ng t√¨m th·∫•y HumanoidRootPart") return end

	-- X√≥a thang c≈© n·∫øu c√≥
	if ladderModel and ladderModel.Parent then
		ladderModel:Destroy()
	end

	ladderModel = Instance.new("Model", workspace)
	ladderModel.Name = "DnnLadder"

	local angle = math.rad(45)
	local offsetZ = math.cos(angle) * height
	local offsetY = math.sin(angle) * height

	local forward = hrp.CFrame.LookVector
	local basePosition = hrp.Position + forward * 5
	local centerPos = basePosition + forward * (offsetZ / 2) + Vector3.new(0, offsetY / 2, 0)
	local cf = CFrame.new(centerPos, centerPos + forward) * CFrame.Angles(-angle, 0, 0)

	-- Part trung t√¢m
	local center = Instance.new("Part")
	center.Name = "Center"
	center.Size = Vector3.new(1, 1, 1)
	center.Anchored = false
	center.CanCollide = false
	center.Transparency = 1
	center.CFrame = cf
	center.Parent = ladderModel
	ladderModel.PrimaryPart = center

	-- Hai c·ªôt d·ªçc
	for _, side in ipairs({-2.5, 2.5}) do
		local sidePole = Instance.new("Part")
		sidePole.Size = Vector3.new(0.4, height, 0.4)
		sidePole.Anchored = false
		sidePole.Material = Enum.Material.Metal
		sidePole.BrickColor = BrickColor.Gray()
		sidePole.Name = "SidePole"
		sidePole.CFrame = cf * CFrame.new(side, 0, 0)
		sidePole.Parent = ladderModel
	end

	-- C√°c b·∫≠c ngang
	for i = 1, math.floor(height) do
		local rung = Instance.new("Part")
		rung.Size = Vector3.new(5, 0.2, 0.2)
		rung.Anchored = false
		rung.Material = Enum.Material.Metal
		rung.BrickColor = BrickColor.new("Medium stone grey")
		rung.Name = "Rung"
		rung.CFrame = cf * CFrame.new(0, height / 2 - i + 0.5, 0)
		rung.Parent = ladderModel
	end

	-- G·∫Øn Weld v√†o center
	for _, part in ipairs(ladderModel:GetChildren()) do
		if part:IsA("Part") and part ~= center then
			local weld = Instance.new("WeldConstraint")
			weld.Part0 = part
			weld.Part1 = center
			weld.Parent = part
		end
	end

	-- BodyGyro gi·ªØ thƒÉng b·∫±ng
	local gyro = Instance.new("BodyGyro")
	gyro.MaxTorque = Vector3.new(1e6, 1e6, 1e6)
	gyro.CFrame = cf
	gyro.Parent = center

	ladderModel:SetPrimaryPartCFrame(cf)
end)


-- AIMBOT TAB
local aimbotTab = createTab("Aimbot")

local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local Camera = workspace.CurrentCamera
local LocalPlayer = Players.LocalPlayer

-- C√†i ƒë·∫∑t m·∫∑c ƒë·ªãnh
local AimbotEnabled = false
local FOV = 60
local Prediction = 0.15

-- V√≤ng FOV
local FOVCircle = Drawing.new("Circle")
FOVCircle.Color = Color3.fromRGB(0, 255, 0)
FOVCircle.Thickness = 2
FOVCircle.NumSides = 64
FOVCircle.Radius = FOV
FOVCircle.Filled = false
FOVCircle.Visible = false

RunService.RenderStepped:Connect(function()
	FOVCircle.Position = Vector2.new(Camera.ViewportSize.X / 2, Camera.ViewportSize.Y / 2)
	FOVCircle.Radius = FOV
end)

-- FOV Label
local fovLabel = Instance.new("TextLabel", aimbotTab)
fovLabel.Position = UDim2.new(0, 10, 0, 0)
fovLabel.Size = UDim2.new(0, 60, 0, 15)
fovLabel.BackgroundTransparency = 1
fovLabel.Text = "FOV"
fovLabel.TextColor3 = Color3.fromRGB(0, 170, 255)
fovLabel.TextSize = 12
fovLabel.Font = Enum.Font.GothamBold
fovLabel.TextXAlignment = Enum.TextXAlignment.Left

-- √î nh·∫≠p FOV
local fovBox = Instance.new("TextBox", aimbotTab)
fovBox.Size = UDim2.new(0, 60, 0, 25)
fovBox.Position = UDim2.new(0, 10, 0, 15)
fovBox.PlaceholderText = "FOV"
fovBox.Text = tostring(FOV)
fovBox.TextColor3 = Color3.new(1,1,1)
fovBox.BackgroundColor3 = Color3.fromRGB(30,30,30)
fovBox.Font = Enum.Font.Gotham
fovBox.TextSize = 14
fovBox.ClearTextOnFocus = false

-- D·ª± ƒëo√°n Label
local predictLabel = Instance.new("TextLabel", aimbotTab)
predictLabel.Position = UDim2.new(0, 80, 0, 0)
predictLabel.Size = UDim2.new(0, 70, 0, 15)
predictLabel.BackgroundTransparency = 1
predictLabel.Text = "D·ª± ƒëo√°n"
predictLabel.TextColor3 = Color3.fromRGB(0, 170, 255)
predictLabel.TextSize = 12
predictLabel.Font = Enum.Font.GothamBold
predictLabel.TextXAlignment = Enum.TextXAlignment.Left

-- √î nh·∫≠p Prediction
local predictBox = Instance.new("TextBox", aimbotTab)
predictBox.Size = UDim2.new(0, 70, 0, 25)
predictBox.Position = UDim2.new(0, 80, 0, 15)
predictBox.PlaceholderText = "0.15"
predictBox.Text = tostring(Prediction)
predictBox.TextColor3 = Color3.new(1,1,1)
predictBox.BackgroundColor3 = Color3.fromRGB(30,30,30)
predictBox.Font = Enum.Font.Gotham
predictBox.TextSize = 14
predictBox.ClearTextOnFocus = false

-- N√∫t b·∫≠t/t·∫Øt Aimbot (AimBot ON/OFF)
local AimbotButton = Instance.new("TextButton", aimbotTab)
AimbotButton.Size = UDim2.new(0, 90, 0, 25)
AimbotButton.Position = UDim2.new(0, 160, 0, 15)
AimbotButton.Text = "AimBot OFF"
AimbotButton.BackgroundColor3 = Color3.fromRGB(150, 0, 0)
AimbotButton.TextColor3 = Color3.new(1,1,1)
AimbotButton.Font = Enum.Font.GothamBold
AimbotButton.TextSize = 13

-- Label h∆∞·ªõng d·∫´n
local guideLabel = Instance.new("TextLabel", aimbotTab)
guideLabel.Size = UDim2.new(1, -20, 0, 40)
guideLabel.Position = UDim2.new(0, 10, 0, 45)
guideLabel.TextWrapped = true
guideLabel.BackgroundTransparency = 1
guideLabel.TextColor3 = Color3.fromRGB(200, 200, 200)
guideLabel.TextSize = 12
guideLabel.Font = Enum.Font.Gotham
guideLabel.Text = " Khuy·∫øn ngh·ªã Prediction: 0.13 - 0.16 (m·∫∑c ƒë·ªãnh 0.15)\nüßëüèª‚Äçüíª Make by DNN"

-- C·∫≠p nh·∫≠t FOV v√† Prediction khi ng∆∞·ªùi d√πng nh·∫≠p
fovBox.FocusLost:Connect(function()
	local newFOV = tonumber(fovBox.Text)
	if newFOV and newFOV > 0 then
		FOV = newFOV
	end
end)

predictBox.FocusLost:Connect(function()
	local newPred = tonumber(predictBox.Text)
	if newPred and newPred >= 0 then
		Prediction = newPred
	end
end)

-- Toggle Aimbot
AimbotButton.MouseButton1Click:Connect(function()
	AimbotEnabled = not AimbotEnabled
	AimbotButton.Text = AimbotEnabled and "AimBot ON" or "AimBot OFF"
	AimbotButton.BackgroundColor3 = AimbotEnabled and Color3.fromRGB(0, 170, 0) or Color3.fromRGB(150, 0, 0)
	FOVCircle.Visible = AimbotEnabled
end)

-- H√†m t√¨m k·∫ª ƒë·ªãch g·∫ßn nh·∫•t
local function GetNearestEnemy()
	local nearest = nil
	local closestDistance = math.huge

	for _, plr in ipairs(Players:GetPlayers()) do
		if plr ~= LocalPlayer and plr.Team ~= LocalPlayer.Team then
			local char = plr.Character
			if char and char:FindFirstChild("Head") and char:FindFirstChild("HumanoidRootPart") and char:FindFirstChild("Humanoid") then
				if char.Humanoid.Health <= 0 then continue end

				local head = char.Head
				local hrp = char.HumanoidRootPart
				local predicted = head.Position + hrp.Velocity * Prediction

				local screenPos, onScreen = Camera:WorldToViewportPoint(predicted)
				if onScreen then
					local distance2D = (Vector2.new(screenPos.X, screenPos.Y) - FOVCircle.Position).Magnitude
					local distance3D = (hrp.Position - LocalPlayer.Character.HumanoidRootPart.Position).Magnitude

					if distance2D < FOV and distance3D < closestDistance then
						closestDistance = distance3D
						nearest = plr
					end
				end
			end
		end
	end
	return nearest
end

-- Aimbot x·ª≠ l√Ω
RunService.RenderStepped:Connect(function()
	if AimbotEnabled then
		local target = GetNearestEnemy()
		if target and target.Character and target.Character:FindFirstChild("Head") then
			local head = target.Character.Head
			local hrp = target.Character.HumanoidRootPart
			local predictedPos = head.Position + hrp.Velocity * Prediction

			Camera.CFrame = CFrame.new(Camera.CFrame.Position, predictedPos)
		end
	end
end)

local player = game.Players.LocalPlayer
local camera = workspace.CurrentCamera

-- Xo√° n·∫øu c√≥ ch·ªØ c≈©
local old = workspace:FindFirstChild("DNN_HubLabel")
if old then old:Destroy() end

-- T·∫°o Model v√† Part g·∫Øn ch·ªØ
local model = Instance.new("Model", workspace)
model.Name = "DNN_HubLabel"

local part = Instance.new("Part")
part.Name = "Anchor"
part.Size = Vector3.new(1, 1, 1)
part.Anchored = true
part.CanCollide = false
part.Transparency = 1
part.Parent = model

-- BillboardGui hi·ªÉn th·ªã ch·ªØ, lu√¥n h∆∞·ªõng camera
local billboard = Instance.new("BillboardGui", part)
billboard.Size = UDim2.new(0, 200, 0, 50) -- nh·ªè l·∫°i
billboard.AlwaysOnTop = true
billboard.LightInfluence = 0
billboard.StudsOffset = Vector3.new(0, 0, 0)
billboard.Name = "DNN_Billboard"

local label = Instance.new("TextLabel", billboard)
label.Size = UDim2.new(1, 0, 1, 0)
label.BackgroundTransparency = 1
label.Text = "Uchiha Madara"
label.TextScaled = true
label.Font = Enum.Font.Arcade -- Ki·ªÉu pixel-style
label.TextStrokeTransparency = 0.2
label.TextStrokeColor3 = Color3.new(0, 0, 0)

-- üé® M√†u h·ªìng ƒë·∫≠m pixel-style
label.TextColor3 = Color3.fromRGB(255, 100, 100) -- m√†u h·ªìng ƒë·∫≠m ƒë·∫πp (hot pink)

-- Theo camera h∆∞·ªõng nh√¨n
game:GetService("RunService").RenderStepped:Connect(function()
	local camCF = camera.CFrame
	local look = camCF.LookVector
	local position = camCF.Position + look * 60 + Vector3.new(0, 15, 0) -- ph√≠a tr∆∞·ªõc v√† cao l√™n

	part.Position = position
end)
local Lighting = game:GetService("Lighting")

-- M√ÇY BAY
local cloudModel = Instance.new("Model", workspace)
cloudModel.Name = "DNN_Clouds"

for i = 1, 10 do
	local cloud = Instance.new("Part", cloudModel)
	cloud.Size = Vector3.new(30, 10, 20)
	cloud.Position = workspace.CurrentCamera.CFrame.Position + Vector3.new(math.random(-200, 200), math.random(80, 130), math.random(-200, 200))
	cloud.Anchored = true
	cloud.Transparency = 0.6
	cloud.CanCollide = false
	cloud.Material = Enum.Material.SmoothPlastic
	cloud.Color = Color3.fromRGB(240, 240, 240)
	cloud.Name = "Cloud"

	local texture = Instance.new("Decal", cloud)
	texture.Texture = "http://www.roblox.com/asset/?id=5995530733" -- texture m√¢y
	texture.Face = Enum.NormalId.Top

	-- Di chuy·ªÉn m√¢y nh·∫π nh√†ng
	coroutine.wrap(function()
		while true do
			wait(0.1)
			if cloud and cloud.Parent then
				cloud.Position += Vector3.new(0.1, 0, 0.05)
				if (cloud.Position - workspace.CurrentCamera.CFrame.Position).Magnitude > 300 then
					cloud.Position = workspace.CurrentCamera.CFrame.Position + Vector3.new(math.random(-150, 150), math.random(80, 130), math.random(-150, 150))
				end
			end
		end
	end)()
end
local RunService = game:GetService("RunService")
local camera = workspace.CurrentCamera

local RunService = game:GetService("RunService")
local camera = workspace.CurrentCamera

local RunService = game:GetService("RunService")

local RunService = game:GetService("RunService")

-- G·ª° c≈© n·∫øu c√≥
local camera = workspace.CurrentCamera

-- X√≥a n·∫øu c√≥ m·∫Øt c≈©
local old = workspace:FindFirstChild("SharinganSky")
if old then old:Destroy() end

-- T·∫°o ph·∫ßn SHARINGAN c·ª±c l·ªõn gi·ªØa tr·ªùi
local eyePart = Instance.new("Part", workspace)
eyePart.Name = "SharinganSky"
eyePart.Anchored = true
eyePart.CanCollide = false
eyePart.Size = Vector3.new(1000, 1, 1000) -- R·∫•t l·ªõn ƒë·ªÉ bao ph·ªß b·∫ßu tr·ªùi
eyePart.Position = Vector3.new(0, 800, 0) -- Tr√™n ƒë·∫ßu cao
eyePart.Transparency = 0.2
eyePart.Material = Enum.Material.Neon
eyePart.Color = Color3.fromRGB(255, 0, 0) -- M√†u ƒë·ªè huy·ªÅn ·∫£o

-- G·∫Øn decal Sharingan v√†o m·∫∑t d∆∞·ªõi (Down)
local decal = Instance.new("Decal", eyePart)
decal.Texture = "rbxassetid://18512953274" -- ID m·ªõi b·∫°n ƒë∆∞a
decal.Face = Enum.NormalId.Bottom

-- Hi·ªáu ·ª©ng √°nh s√°ng ƒë·∫πp
local light = Instance.new("PointLight", eyePart)
light.Range = 150
light.Brightness = 3
light.Color = Color3.fromRGB(255, 50, 50)
local Lighting = game:GetService("Lighting")

-- TƒÉng ƒë·ªô ph√¢n gi·∫£i √°nh s√°ng
Lighting.GlobalShadows = true
Lighting.EnvironmentDiffuseScale = 1
Lighting.EnvironmentSpecularScale = 1
Lighting.Brightness = 3
Lighting.ClockTime = 14
Lighting.GeographicLatitude = 41

-- B√≥ng ƒë·ªï th·ª±c & √°nh s√°ng chi ti·∫øt
Lighting.ShadowSoftness = 0.25
Lighting.ExposureCompensation = 0.3

-- Sun Rays (√°nh s√°ng m·∫∑t tr·ªùi chi·∫øu xuy√™n)
local sunRays = Instance.new("SunRaysEffect", Lighting)
sunRays.Intensity = 0.2
sunRays.Spread = 0.6

-- Bloom (√°nh s√°ng r·ª±c r·ª° xung quanh v·∫≠t s√°ng)
local bloom = Instance.new("BloomEffect", Lighting)
bloom.Intensity = 0.65
bloom.Size = 56
bloom.Threshold = 1.5

-- ColorCorrection (l√†m m√†u s·∫Øc s·ªëng ƒë·ªông h∆°n)
local colorCorrection = Instance.new("ColorCorrectionEffect", Lighting)
colorCorrection.Saturation = 0.2
colorCorrection.Contrast = 0.2
colorCorrection.Brightness = 0.05
colorCorrection.TintColor = Color3.fromRGB(255, 240, 250)

-- DepthOfField (l√†m m·ªù xa g·∫ßn nh∆∞ game AAA)
local dof = Instance.new("DepthOfFieldEffect", Lighting)
dof.FarIntensity = 0.2
dof.FocusDistance = 50
dof.InFocusRadius = 30
dof.NearIntensity = 0.3

-- Blur nh·∫π cho m√¥i tr∆∞·ªùng (t√πy ch·ªçn)
local blur = Instance.new("BlurEffect", Lighting)
blur.Size = 2
