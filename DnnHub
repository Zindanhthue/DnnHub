-- đỉnh
local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local CoreGui = game:GetService("CoreGui")
local Camera = workspace.CurrentCamera
local LocalPlayer = Players.LocalPlayer
local Character = LocalPlayer.Character or LocalPlayer.CharacterAdded:Wait()
local Humanoid = Character:WaitForChild("Humanoid")

-- GUI Setup
local gui = Instance.new("ScreenGui", CoreGui)
gui.Name = "DnnHub"

-- Toggle Button
local toggle = Instance.new("ImageButton", gui)
toggle.Size = UDim2.new(0, 50, 0, 50)
toggle.Position = UDim2.new(0, 30, 0, 100)
toggle.BackgroundTransparency = 1
toggle.Image = "rbxassetid://13226300735"
toggle.Draggable = true
toggle.Active = true
Instance.new("UICorner", toggle)

-- Main Frame
local main = Instance.new("Frame", gui)
main.Size = UDim2.new(0, 280, 0, 220)
main.Position = UDim2.new(0, 260, 0, 70)
main.BackgroundColor3 = Color3.fromRGB(30,30,30)
main.BackgroundTransparency = 0.3
main.Visible = false
main.Active = true
main.Draggable = true
Instance.new("UICorner", main)
-- Toggle mở menu
toggle.MouseButton1Click:Connect(function()
	main.Visible = not main.Visible
end)

-- Title
-- Title (Logo + Text DnnHub) - Căn giữa đẹp
local titleFrame = Instance.new("Frame", main)
titleFrame.Size = UDim2.new(1, 0, 0, 60)
titleFrame.Position = UDim2.new(0, 0, 0, 0)
titleFrame.BackgroundTransparency = 1

-- Logo to rõ
local logoIcon = Instance.new("ImageLabel", titleFrame)
logoIcon.Size = UDim2.new(0, 40, 0, 40)
logoIcon.Position = UDim2.new(0.5, -50, 0, 14)
logoIcon.BackgroundTransparency = 1
logoIcon.Image = "rbxassetid://13226300735"

-- Chữ DnnHub - căn giữa
local title = Instance.new("TextLabel", titleFrame)
title.Text = "DnnHub"
title.Size = UDim2.new(0, 120, 0, 32)
title.Position = UDim2.new(0.5, -30, 0, 14)
title.BackgroundTransparency = 1
title.TextColor3 = Color3.fromRGB(255, 105, 180) -- hồng neon
title.TextSize = 22
title.Font = Enum.Font.GothamBlack
title.TextXAlignment = Enum.TextXAlignment.Center

-- Tabs (dịch xuống sau tiêu đề, nhỏ gọn lại)
local tabs = Instance.new("Frame", main)
tabs.Size = UDim2.new(1, 0, 0, 26)
tabs.Position = UDim2.new(0, 0, 0, 65)
tabs.BackgroundTransparency = 1

-- Tabs list
local tabList = {}
local tabButtons = {}
local tabNames = {"Miss", "ESP", "Thang", "Aimbot"}
local tabColors = {
	Miss = Color3.fromRGB(0, 170, 255),   -- xanh dương
	ESP = Color3.fromRGB(255, 170, 0),     -- cam
	Thang = Color3.fromRGB(100, 255, 100), -- xanh lá
	Aimbot = Color3.fromRGB(255, 85, 85),  -- đỏ
}

local selectedTab = nil

for i, name in ipairs(tabNames) do
	local btn = Instance.new("TextButton", tabs)
	btn.Size = UDim2.new(0, 65, 0, 26)
	btn.Position = UDim2.new(0, (i - 1) * 68 + 8, 0, 0)
	btn.Text = name
	btn.BackgroundColor3 = tabColors[name]
	btn.TextColor3 = Color3.new(1,1,1)
	btn.Font = Enum.Font.GothamBold
	btn.TextSize = 13
	tabButtons[name] = btn

	-- Hover effect
	btn.MouseEnter:Connect(function()
		if selectedTab ~= name then
			btn.BackgroundColor3 = tabColors[name]:Lerp(Color3.new(1,1,1), 0.2)
		end
	end)
	btn.MouseLeave:Connect(function()
		if selectedTab ~= name then
			btn.BackgroundColor3 = tabColors[name]
		end
	end)

	btn.MouseButton1Click:Connect(function()
		-- Ẩn tất cả tab content
		for _, tab in pairs(tabList) do tab.Visible = false end
		-- Reset màu tất cả button
		for tabName, button in pairs(tabButtons) do
			if tabName == name then
				button.BackgroundColor3 = tabColors[name]:Lerp(Color3.new(1,1,1), 0.3) -- chọn = sáng hơn
			else
				button.BackgroundColor3 = tabColors[tabName]
			end
		end
		-- Hiện tab được chọn
		tabList[name].Visible = true
		selectedTab = name
	end)
end

-- Tabs content holder (giữ nguyên chiều cao tính từ dưới tabs)
local function createTab(name)
	local frame = Instance.new("Frame", main)
	frame.Size = UDim2.new(1, 0, 1, -95)
	frame.Position = UDim2.new(0, 0, 0, 95)
	frame.BackgroundTransparency = 1
	frame.Visible = false
	tabList[name] = frame
	return frame
end

-- MISS TAB (Speed + Infinite Jump)

local missTab = createTab("Miss")

-- Tốc độ
local speedBox = Instance.new("TextBox", missTab)
speedBox.PlaceholderText = "Input Speed"
speedBox.Size = UDim2.new(0, 150, 0, 28)
speedBox.Position = UDim2.new(0, 10, 0, 10)
speedBox.Font = Enum.Font.Gotham
speedBox.TextSize = 14
speedBox.TextColor3 = Color3.new(1,1,1)
speedBox.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
speedBox.Text = ""

local speedToggle = Instance.new("TextButton", missTab)
speedToggle.Size = UDim2.new(0, 100, 0, 28)
speedToggle.Position = UDim2.new(0, 170, 0, 10)
speedToggle.Text = "Speed OFF"
speedToggle.BackgroundColor3 = Color3.fromRGB(150, 0, 0)
speedToggle.TextColor3 = Color3.new(1,1,1)
speedToggle.Font = Enum.Font.GothamBold
speedToggle.TextSize = 14

local speedEnabled = false
speedToggle.MouseButton1Click:Connect(function()
	speedEnabled = not speedEnabled
	speedToggle.Text = speedEnabled and "Speed ON" or "Speed OFF"
	speedToggle.BackgroundColor3 = speedEnabled and Color3.fromRGB(0,170,0) or Color3.fromRGB(150,0,0)

	if speedEnabled then
		-- Bật speed
		local speed = tonumber(speedBox.Text)
		if speed and speed > 0 then
			Humanoid.WalkSpeed = speed
		else
			Humanoid.WalkSpeed = 16
		end
	else
		-- Tắt speed → reset về mặc định
		Humanoid.WalkSpeed = 16
	end
end)

-- Tự động cập nhật tốc độ
speedBox.FocusLost:Connect(function()
	local speed = tonumber(speedBox.Text)
	if speedEnabled and speed and speed > 0 then
		Humanoid.WalkSpeed = speed
	end
end)

-- Infinite Jump
local infJumpToggle = Instance.new("TextButton", missTab)
infJumpToggle.Size = UDim2.new(0, 260, 0, 28)
infJumpToggle.Position = UDim2.new(0, 10, 0, 50)
infJumpToggle.Text = "Infinite Jump: OFF"
infJumpToggle.BackgroundColor3 = Color3.fromRGB(150, 0, 0)
infJumpToggle.TextColor3 = Color3.new(1,1,1)
infJumpToggle.Font = Enum.Font.GothamBold
infJumpToggle.TextSize = 14

local infJumpEnabled = false
infJumpToggle.MouseButton1Click:Connect(function()
	infJumpEnabled = not infJumpEnabled
	infJumpToggle.Text = infJumpEnabled and "Infinite Jump: ON" or "Infinite Jump: OFF"
	infJumpToggle.BackgroundColor3 = infJumpEnabled and Color3.fromRGB(0, 170, 0) or Color3.fromRGB(150, 0, 0)
end)

-- Kích hoạt Infinite Jump
local UserInputService = game:GetService("UserInputService")
UserInputService.JumpRequest:Connect(function()
	if infJumpEnabled and Humanoid then
		Humanoid:ChangeState(Enum.HumanoidStateType.Jumping)
	end
end)

-- ESP TAB
local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local LocalPlayer = Players.LocalPlayer
local Camera = workspace.CurrentCamera

local espTab = createTab("ESP")
local espSettings = {
    enemyESP = false,
    enemyName = false,
    enemyDistance = false,
    enemyHealth = false,
    teamESP = false,
    teamName = false,
    teamDistance = false,
    teamHealth = false
}

-- GUI Labels
local function createLabel(text, posY)
    local label = Instance.new("TextLabel", espTab)
    label.Size = UDim2.new(1, -10, 0, 15)
    label.Position = UDim2.new(0, 5, 0, posY)
    label.BackgroundTransparency = 1
    label.Text = text
    label.TextColor3 = Color3.new(1, 1, 1)
    label.Font = Enum.Font.GothamBold
    label.TextSize = 12
    label.TextXAlignment = Enum.TextXAlignment.Left
end

-- Toggle buttons
local function createSmallToggle(name, pos, label)
    local btn = Instance.new("TextButton", espTab)
    btn.Size = UDim2.new(0, 60, 0, 20)
    btn.Position = pos
    btn.Text = label
    btn.Font = Enum.Font.GothamBold
    btn.TextSize = 11
    btn.TextColor3 = Color3.new(1, 1, 1)
    btn.BackgroundColor3 = Color3.fromRGB(150, 0, 0)
    local state = false

    btn.MouseButton1Click:Connect(function()
        state = not state
        espSettings[name] = state
        btn.BackgroundColor3 = state and Color3.fromRGB(0, 170, 0) or Color3.fromRGB(150, 0, 0)
    end)
end

-- Labels + buttons layout
createLabel("ESP Địch", 5)
createSmallToggle("enemyESP", UDim2.new(0, 5, 0, 22), "Highlight")
createSmallToggle("enemyName", UDim2.new(0, 70, 0, 22), "Tên")
createSmallToggle("enemyDistance", UDim2.new(0, 135, 0, 22), "Khoảng")
createSmallToggle("enemyHealth", UDim2.new(0, 200, 0, 22), "Máu")

createLabel("ESP Đồng Đội", 45)
createSmallToggle("teamESP", UDim2.new(0, 5, 0, 62), "Highlight")
createSmallToggle("teamName", UDim2.new(0, 70, 0, 62), "Tên")
createSmallToggle("teamDistance", UDim2.new(0, 135, 0, 62), "Khoảng")
createSmallToggle("teamHealth", UDim2.new(0, 200, 0, 62), "Máu")

-- Utility: Get or Create Billboard
local function getOrCreateGui(name, adornee, size, offset)
    local gui = adornee:FindFirstChild(name)
    if not gui then
        gui = Instance.new("BillboardGui")
        gui.Name = name
        gui.Adornee = adornee
        gui.Size = size
        gui.StudsOffset = offset
        gui.AlwaysOnTop = true
        gui.Parent = adornee

        local label = Instance.new("TextLabel", gui)
        label.Size = UDim2.new(1, 0, 1, 0)
        label.BackgroundTransparency = 1
        label.Font = Enum.Font.GothamBold
        label.TextSize = 11
        label.Name = "Text"
    end
    return gui
end

-- Utility: Get or Create Highlight
local function getOrCreateHighlight(char, name, color)
    local hl = char:FindFirstChild(name)
    if not hl then
        hl = Instance.new("Highlight", char)
        hl.Name = name
        hl.FillTransparency = 0.5
        hl.OutlineColor = Color3.new(1, 1, 1)
    end
    hl.FillColor = color
    return hl
end

-- Main render loop
RunService.RenderStepped:Connect(function()
    local charLocal = LocalPlayer.Character
    if not charLocal or not charLocal:FindFirstChild("HumanoidRootPart") then return end

    for _, plr in ipairs(Players:GetPlayers()) do
        if plr == LocalPlayer then continue end
        local char = plr.Character
        if not char then continue end

        local head = char:FindFirstChild("Head")
        local hrp = char:FindFirstChild("HumanoidRootPart")
        local hum = char:FindFirstChild("Humanoid")
        if not head or not hrp then continue end

        local isEnemy = plr.Team ~= LocalPlayer.Team
        local isTeammate = not isEnemy

        -- ESP Địch
        if isEnemy then
            if espSettings.enemyESP then
                getOrCreateHighlight(char, "ESPHighlight", Color3.new(1, 0, 0))
            else
                if char:FindFirstChild("ESPHighlight") then char.ESPHighlight:Destroy() end
            end

            if espSettings.enemyName then
                local gui = getOrCreateGui("ESPName", head, UDim2.new(0, 100, 0, 18), Vector3.new(0, 2.5, 0))
                gui.Text.Text = plr.Name
                gui.Text.TextColor3 = Color3.new(1, 0, 0)
            elseif head:FindFirstChild("ESPName") then head.ESPName:Destroy() end

            if espSettings.enemyHealth and hum then
                local gui = getOrCreateGui("ESPHealth", head, UDim2.new(0, 100, 0, 14), Vector3.new(0, 3.5, 0))
                gui.Text.Text = math.floor((hum.Health / hum.MaxHealth) * 100) .. "%"
                gui.Text.TextColor3 = Color3.fromRGB(0, 255, 0)
            elseif head:FindFirstChild("ESPHealth") then head.ESPHealth:Destroy() end

            if espSettings.enemyDistance then
                local gui = getOrCreateGui("ESPDist", hrp, UDim2.new(0, 100, 0, 14), Vector3.new(0, -2.5, 0))
                gui.Text.Text = string.format("%.0f m", (hrp.Position - charLocal.HumanoidRootPart.Position).Magnitude)
                gui.Text.TextColor3 = Color3.new(1, 0, 0)
            elseif hrp:FindFirstChild("ESPDist") then hrp.ESPDist:Destroy() end
        end

        -- ESP Đồng đội
        if isTeammate then
            if espSettings.teamESP then
                getOrCreateHighlight(char, "ESPHighlight", Color3.fromRGB(0, 170, 255))
            else
                if char:FindFirstChild("ESPHighlight") then char.ESPHighlight:Destroy() end
            end

            if espSettings.teamName then
                local gui = getOrCreateGui("ESPName", head, UDim2.new(0, 100, 0, 18), Vector3.new(0, 2.5, 0))
                gui.Text.Text = plr.Name
                gui.Text.TextColor3 = Color3.fromRGB(0, 170, 255)
            elseif head:FindFirstChild("ESPName") then head.ESPName:Destroy() end

            if espSettings.teamHealth and hum then
                local gui = getOrCreateGui("ESPHealth", head, UDim2.new(0, 100, 0, 14), Vector3.new(0, 3.5, 0))
                gui.Text.Text = math.floor((hum.Health / hum.MaxHealth) * 100) .. "%"
                gui.Text.TextColor3 = Color3.fromRGB(0, 255, 255)
            elseif head:FindFirstChild("ESPHealth") then head.ESPHealth:Destroy() end

            if espSettings.teamDistance then
                local gui = getOrCreateGui("ESPDist", hrp, UDim2.new(0, 100, 0, 14), Vector3.new(0, -2.5, 0))
                gui.Text.Text = string.format("%.0f m", (hrp.Position - charLocal.HumanoidRootPart.Position).Magnitude)
                gui.Text.TextColor3 = Color3.fromRGB(0, 170, 255)
            elseif hrp:FindFirstChild("ESPDist") then hrp.ESPDist:Destroy() end
        end
    end
end)

-- Tab Thang
local tabThang = createTab("Thang")

local Players = game:GetService("Players")
local LocalPlayer = Players.LocalPlayer

-- UI: Label + Input + Button
local label = Instance.new("TextLabel", tabThang)
label.Text = "Chiều cao thang (m):"
label.Size = UDim2.new(0, 200, 0, 20)
label.Position = UDim2.new(0, 10, 0, 10)
label.BackgroundTransparency = 1
label.TextColor3 = Color3.new(1, 1, 1)
label.Font = Enum.Font.Gotham
label.TextSize = 14

local heightBox = Instance.new("TextBox", tabThang)
heightBox.Size = UDim2.new(0, 100, 0, 25)
heightBox.Position = UDim2.new(0, 10, 0, 35)
heightBox.Text = "10"
heightBox.TextColor3 = Color3.new(1, 1, 1)
heightBox.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
heightBox.Font = Enum.Font.Gotham
heightBox.TextSize = 14
heightBox.ClearTextOnFocus = false

local createBtn = Instance.new("TextButton", tabThang)
createBtn.Size = UDim2.new(0, 80, 0, 24)
createBtn.Position = UDim2.new(0, 120, 0, 35)
createBtn.Text = "Tạo Thang"
createBtn.Font = Enum.Font.GothamBold
createBtn.TextSize = 14
createBtn.TextColor3 = Color3.new(1, 1, 1)
createBtn.BackgroundColor3 = Color3.fromRGB(50, 50, 50)

-- Model lưu thang
local ladderModel

-- Hàm tạo thang
createBtn.MouseButton1Click:Connect(function()
	local height = tonumber(heightBox.Text)
	if not height or height <= 0 then return end

	-- Đảm bảo Character và HRP tồn tại
	local character = LocalPlayer.Character or LocalPlayer.CharacterAdded:Wait()
	local hrp = character:FindFirstChild("HumanoidRootPart") or character:WaitForChild("HumanoidRootPart", 2)
	if not hrp then warn("Không tìm thấy HumanoidRootPart") return end

	-- Xóa thang cũ nếu có
	if ladderModel and ladderModel.Parent then
		ladderModel:Destroy()
	end

	ladderModel = Instance.new("Model", workspace)
	ladderModel.Name = "DnnLadder"

	local angle = math.rad(45)
	local offsetZ = math.cos(angle) * height
	local offsetY = math.sin(angle) * height

	local forward = hrp.CFrame.LookVector
	local basePosition = hrp.Position + forward * 5
	local centerPos = basePosition + forward * (offsetZ / 2) + Vector3.new(0, offsetY / 2, 0)
	local cf = CFrame.new(centerPos, centerPos + forward) * CFrame.Angles(-angle, 0, 0)

	-- Part trung tâm
	local center = Instance.new("Part")
	center.Name = "Center"
	center.Size = Vector3.new(1, 1, 1)
	center.Anchored = false
	center.CanCollide = false
	center.Transparency = 1
	center.CFrame = cf
	center.Parent = ladderModel
	ladderModel.PrimaryPart = center

	-- Hai cột dọc
	for _, side in ipairs({-2.5, 2.5}) do
		local sidePole = Instance.new("Part")
		sidePole.Size = Vector3.new(0.4, height, 0.4)
		sidePole.Anchored = false
		sidePole.Material = Enum.Material.Metal
		sidePole.BrickColor = BrickColor.Gray()
		sidePole.Name = "SidePole"
		sidePole.CFrame = cf * CFrame.new(side, 0, 0)
		sidePole.Parent = ladderModel
	end

	-- Các bậc ngang
	for i = 1, math.floor(height) do
		local rung = Instance.new("Part")
		rung.Size = Vector3.new(5, 0.2, 0.2)
		rung.Anchored = false
		rung.Material = Enum.Material.Metal
		rung.BrickColor = BrickColor.new("Medium stone grey")
		rung.Name = "Rung"
		rung.CFrame = cf * CFrame.new(0, height / 2 - i + 0.5, 0)
		rung.Parent = ladderModel
	end

	-- Gắn Weld vào center
	for _, part in ipairs(ladderModel:GetChildren()) do
		if part:IsA("Part") and part ~= center then
			local weld = Instance.new("WeldConstraint")
			weld.Part0 = part
			weld.Part1 = center
			weld.Parent = part
		end
	end

	-- BodyGyro giữ thăng bằng
	local gyro = Instance.new("BodyGyro")
	gyro.MaxTorque = Vector3.new(1e6, 1e6, 1e6)
	gyro.CFrame = cf
	gyro.Parent = center

	ladderModel:SetPrimaryPartCFrame(cf)
end)


-- AIMBOT TAB
local aimbotTab = createTab("Aimbot")

local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local Camera = workspace.CurrentCamera
local LocalPlayer = Players.LocalPlayer

-- Cài đặt mặc định
local AimbotEnabled = false
local FOV = 60
local Prediction = 0.15

-- Vòng FOV
local FOVCircle = Drawing.new("Circle")
FOVCircle.Color = Color3.fromRGB(0, 255, 0)
FOVCircle.Thickness = 2
FOVCircle.NumSides = 64
FOVCircle.Radius = FOV
FOVCircle.Filled = false
FOVCircle.Visible = false

RunService.RenderStepped:Connect(function()
	FOVCircle.Position = Vector2.new(Camera.ViewportSize.X / 2, Camera.ViewportSize.Y / 2)
	FOVCircle.Radius = FOV
end)

-- FOV Label
local fovLabel = Instance.new("TextLabel", aimbotTab)
fovLabel.Position = UDim2.new(0, 10, 0, 0)
fovLabel.Size = UDim2.new(0, 60, 0, 15)
fovLabel.BackgroundTransparency = 1
fovLabel.Text = "FOV"
fovLabel.TextColor3 = Color3.fromRGB(0, 170, 255)
fovLabel.TextSize = 12
fovLabel.Font = Enum.Font.GothamBold
fovLabel.TextXAlignment = Enum.TextXAlignment.Left

-- Ô nhập FOV
local fovBox = Instance.new("TextBox", aimbotTab)
fovBox.Size = UDim2.new(0, 60, 0, 25)
fovBox.Position = UDim2.new(0, 10, 0, 15)
fovBox.PlaceholderText = "FOV"
fovBox.Text = tostring(FOV)
fovBox.TextColor3 = Color3.new(1,1,1)
fovBox.BackgroundColor3 = Color3.fromRGB(30,30,30)
fovBox.Font = Enum.Font.Gotham
fovBox.TextSize = 14
fovBox.ClearTextOnFocus = false

-- Dự đoán Label
local predictLabel = Instance.new("TextLabel", aimbotTab)
predictLabel.Position = UDim2.new(0, 80, 0, 0)
predictLabel.Size = UDim2.new(0, 70, 0, 15)
predictLabel.BackgroundTransparency = 1
predictLabel.Text = "Dự đoán"
predictLabel.TextColor3 = Color3.fromRGB(0, 170, 255)
predictLabel.TextSize = 12
predictLabel.Font = Enum.Font.GothamBold
predictLabel.TextXAlignment = Enum.TextXAlignment.Left

-- Ô nhập Prediction
local predictBox = Instance.new("TextBox", aimbotTab)
predictBox.Size = UDim2.new(0, 70, 0, 25)
predictBox.Position = UDim2.new(0, 80, 0, 15)
predictBox.PlaceholderText = "0.15"
predictBox.Text = tostring(Prediction)
predictBox.TextColor3 = Color3.new(1,1,1)
predictBox.BackgroundColor3 = Color3.fromRGB(30,30,30)
predictBox.Font = Enum.Font.Gotham
predictBox.TextSize = 14
predictBox.ClearTextOnFocus = false

-- Nút bật/tắt Aimbot (AimBot ON/OFF)
local AimbotButton = Instance.new("TextButton", aimbotTab)
AimbotButton.Size = UDim2.new(0, 90, 0, 25)
AimbotButton.Position = UDim2.new(0, 160, 0, 15)
AimbotButton.Text = "AimBot OFF"
AimbotButton.BackgroundColor3 = Color3.fromRGB(150, 0, 0)
AimbotButton.TextColor3 = Color3.new(1,1,1)
AimbotButton.Font = Enum.Font.GothamBold
AimbotButton.TextSize = 13

-- Label hướng dẫn
local guideLabel = Instance.new("TextLabel", aimbotTab)
guideLabel.Size = UDim2.new(1, -20, 0, 40)
guideLabel.Position = UDim2.new(0, 10, 0, 45)
guideLabel.TextWrapped = true
guideLabel.BackgroundTransparency = 1
guideLabel.TextColor3 = Color3.fromRGB(200, 200, 200)
guideLabel.TextSize = 12
guideLabel.Font = Enum.Font.Gotham
guideLabel.Text = " Khuyến nghị Prediction: 0.13 - 0.16 (mặc định 0.15)\n🧑🏻‍💻 Make by DNN"

-- Cập nhật FOV và Prediction khi người dùng nhập
fovBox.FocusLost:Connect(function()
	local newFOV = tonumber(fovBox.Text)
	if newFOV and newFOV > 0 then
		FOV = newFOV
	end
end)

predictBox.FocusLost:Connect(function()
	local newPred = tonumber(predictBox.Text)
	if newPred and newPred >= 0 then
		Prediction = newPred
	end
end)

-- Toggle Aimbot
AimbotButton.MouseButton1Click:Connect(function()
	AimbotEnabled = not AimbotEnabled
	AimbotButton.Text = AimbotEnabled and "AimBot ON" or "AimBot OFF"
	AimbotButton.BackgroundColor3 = AimbotEnabled and Color3.fromRGB(0, 170, 0) or Color3.fromRGB(150, 0, 0)
	FOVCircle.Visible = AimbotEnabled
end)

-- Hàm tìm kẻ địch gần nhất
local function GetNearestEnemy()
	local nearest = nil
	local closestDistance = math.huge

	for _, plr in ipairs(Players:GetPlayers()) do
		if plr ~= LocalPlayer and plr.Team ~= LocalPlayer.Team then
			local char = plr.Character
			if char and char:FindFirstChild("Head") and char:FindFirstChild("HumanoidRootPart") and char:FindFirstChild("Humanoid") then
				if char.Humanoid.Health <= 0 then continue end

				local head = char.Head
				local hrp = char.HumanoidRootPart
				local predicted = head.Position + hrp.Velocity * Prediction

				local screenPos, onScreen = Camera:WorldToViewportPoint(predicted)
				if onScreen then
					local distance2D = (Vector2.new(screenPos.X, screenPos.Y) - FOVCircle.Position).Magnitude
					local distance3D = (hrp.Position - LocalPlayer.Character.HumanoidRootPart.Position).Magnitude

					if distance2D < FOV and distance3D < closestDistance then
						closestDistance = distance3D
						nearest = plr
					end
				end
			end
		end
	end
	return nearest
end

-- Aimbot xử lý
RunService.RenderStepped:Connect(function()
	if AimbotEnabled then
		local target = GetNearestEnemy()
		if target and target.Character and target.Character:FindFirstChild("Head") then
			local head = target.Character.Head
			local hrp = target.Character.HumanoidRootPart
			local predictedPos = head.Position + hrp.Velocity * Prediction

			Camera.CFrame = CFrame.new(Camera.CFrame.Position, predictedPos)
		end
	end
end)

local player = game.Players.LocalPlayer
local camera = workspace.CurrentCamera

-- Xoá nếu có chữ cũ
local old = workspace:FindFirstChild("DNN_HubLabel")
if old then old:Destroy() end

-- Tạo Model và Part gắn chữ
local model = Instance.new("Model", workspace)
model.Name = "DNN_HubLabel"

local part = Instance.new("Part")
part.Name = "Anchor"
part.Size = Vector3.new(1, 1, 1)
part.Anchored = true
part.CanCollide = false
part.Transparency = 1
part.Parent = model

-- BillboardGui hiển thị chữ, luôn hướng camera
local billboard = Instance.new("BillboardGui", part)
billboard.Size = UDim2.new(0, 200, 0, 50) -- nhỏ lại
billboard.AlwaysOnTop = true
billboard.LightInfluence = 0
billboard.StudsOffset = Vector3.new(0, 0, 0)
billboard.Name = "DNN_Billboard"

local label = Instance.new("TextLabel", billboard)
label.Size = UDim2.new(1, 0, 1, 0)
label.BackgroundTransparency = 1
label.Text = "Uchiha Madara"
label.TextScaled = true
label.Font = Enum.Font.Arcade -- Kiểu pixel-style
label.TextStrokeTransparency = 0.2
label.TextStrokeColor3 = Color3.new(0, 0, 0)

-- 🎨 Màu hồng đậm pixel-style
label.TextColor3 = Color3.fromRGB(255, 100, 100) -- màu hồng đậm đẹp (hot pink)

-- Theo camera hướng nhìn
game:GetService("RunService").RenderStepped:Connect(function()
	local camCF = camera.CFrame
	local look = camCF.LookVector
	local position = camCF.Position + look * 60 + Vector3.new(0, 15, 0) -- phía trước và cao lên

	part.Position = position
end)
local Lighting = game:GetService("Lighting")

-- MÂY BAY
local cloudModel = Instance.new("Model", workspace)
cloudModel.Name = "DNN_Clouds"

for i = 1, 10 do
	local cloud = Instance.new("Part", cloudModel)
	cloud.Size = Vector3.new(30, 10, 20)
	cloud.Position = workspace.CurrentCamera.CFrame.Position + Vector3.new(math.random(-200, 200), math.random(80, 130), math.random(-200, 200))
	cloud.Anchored = true
	cloud.Transparency = 0.6
	cloud.CanCollide = false
	cloud.Material = Enum.Material.SmoothPlastic
	cloud.Color = Color3.fromRGB(240, 240, 240)
	cloud.Name = "Cloud"

	local texture = Instance.new("Decal", cloud)
	texture.Texture = "http://www.roblox.com/asset/?id=5995530733" -- texture mây
	texture.Face = Enum.NormalId.Top

	-- Di chuyển mây nhẹ nhàng
	coroutine.wrap(function()
		while true do
			wait(0.1)
			if cloud and cloud.Parent then
				cloud.Position += Vector3.new(0.1, 0, 0.05)
				if (cloud.Position - workspace.CurrentCamera.CFrame.Position).Magnitude > 300 then
					cloud.Position = workspace.CurrentCamera.CFrame.Position + Vector3.new(math.random(-150, 150), math.random(80, 130), math.random(-150, 150))
				end
			end
		end
	end)()
end
local RunService = game:GetService("RunService")
local camera = workspace.CurrentCamera

local RunService = game:GetService("RunService")
local camera = workspace.CurrentCamera

local RunService = game:GetService("RunService")

local RunService = game:GetService("RunService")

-- Gỡ cũ nếu có
local camera = workspace.CurrentCamera

-- Xóa nếu có mắt cũ
local old = workspace:FindFirstChild("SharinganSky")
if old then old:Destroy() end

-- Tạo phần SHARINGAN cực lớn giữa trời
local eyePart = Instance.new("Part", workspace)
eyePart.Name = "SharinganSky"
eyePart.Anchored = true
eyePart.CanCollide = false
eyePart.Size = Vector3.new(1000, 1, 1000) -- Rất lớn để bao phủ bầu trời
eyePart.Position = Vector3.new(0, 800, 0) -- Trên đầu cao
eyePart.Transparency = 0.2
eyePart.Material = Enum.Material.Neon
eyePart.Color = Color3.fromRGB(255, 0, 0) -- Màu đỏ huyền ảo

-- Gắn decal Sharingan vào mặt dưới (Down)
local decal = Instance.new("Decal", eyePart)
decal.Texture = "rbxassetid://18512953274" -- ID mới bạn đưa
decal.Face = Enum.NormalId.Bottom

-- Hiệu ứng ánh sáng đẹp
local light = Instance.new("PointLight", eyePart)
light.Range = 150
light.Brightness = 3
light.Color = Color3.fromRGB(255, 50, 50)
local Lighting = game:GetService("Lighting")

-- Tăng độ phân giải ánh sáng
Lighting.GlobalShadows = true
Lighting.EnvironmentDiffuseScale = 1
Lighting.EnvironmentSpecularScale = 1
Lighting.Brightness = 3
Lighting.ClockTime = 14
Lighting.GeographicLatitude = 41

-- Bóng đổ thực & ánh sáng chi tiết
Lighting.ShadowSoftness = 0.25
Lighting.ExposureCompensation = 0.3

-- Sun Rays (ánh sáng mặt trời chiếu xuyên)
local sunRays = Instance.new("SunRaysEffect", Lighting)
sunRays.Intensity = 0.2
sunRays.Spread = 0.6

-- Bloom (ánh sáng rực rỡ xung quanh vật sáng)
local bloom = Instance.new("BloomEffect", Lighting)
bloom.Intensity = 0.65
bloom.Size = 56
bloom.Threshold = 1.5

-- ColorCorrection (làm màu sắc sống động hơn)
local colorCorrection = Instance.new("ColorCorrectionEffect", Lighting)
colorCorrection.Saturation = 0.2
colorCorrection.Contrast = 0.2
colorCorrection.Brightness = 0.05
colorCorrection.TintColor = Color3.fromRGB(255, 240, 250)

-- DepthOfField (làm mờ xa gần như game AAA)
local dof = Instance.new("DepthOfFieldEffect", Lighting)
dof.FarIntensity = 0.2
dof.FocusDistance = 50
dof.InFocusRadius = 30
dof.NearIntensity = 0.3

-- Blur nhẹ cho môi trường (tùy chọn)
local blur = Instance.new("BlurEffect", Lighting)
blur.Size = 2
